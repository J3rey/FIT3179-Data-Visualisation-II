{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": {
    "text": "Bronze Medallists by Country - Summer Paris Olympics 2024",
    "fontSize": 24,
    "fontWeight": "bold",
    "anchor": "middle",
    "offset": 20
  },
  "width": "container",
  "height": "container",
  "autosize": {
    "type": "fit",
    "contains": "padding"
  },
  "data": {
    "url": "https://raw.githubusercontent.com/J3rey/FIT3179-Data-Visualisation-HW-W9/refs/heads/main/symbols/ne_110m.topojson",
    "format": { "type": "topojson", "feature": "ne_110m_admin_0_countries" }
  },
  "projection": { "type": "naturalEarth1" },
  "layer": [
    {
      "transform": [
        {
          "calculate": "'Data is not available in ' + datum.properties.NAME",
          "as": "note"
        }
      ],
      "mark": { "type": "geoshape", "fill": "lightgray", "stroke": "white" },
      "encoding": { "tooltip": { "field": "note" } }
    },
    {
      "data": {
        "url": "https://raw.githubusercontent.com/J3rey/FIT3179-Data-Visualisation-HW-W9/refs/heads/main/symbols/oceans.topojson",
        "format": { "type": "topojson", "feature": "oceans" }
      },
      "mark": { "type": "geoshape", "fill": "skyblue" }
    },
    {
      "data": {
        "url": "https://raw.githubusercontent.com/J3rey/FIT3179-Data-Visualisation-HW-W9/refs/heads/main/symbols/WorldMapWithGraticules.topojson",
        "format": { "type": "topojson", "feature": "ne_110m_graticules_30" }
      },
      "mark": { "type": "geoshape", "fill": null, "stroke": "lightgray" }
    },
    {
      "transform": [
        {
          "calculate": "datum.properties.NAME == 'United States of America' ? 'United States' : datum.properties.NAME == 'United Kingdom' ? 'Great Britain' : datum.properties.NAME == 'South Korea' ? 'Korea' : datum.properties.NAME == 'North Korea' ? 'DPR Korea' : datum.properties.NAME == 'Taiwan' ? 'Chinese Taipei' : datum.properties.NAME == 'Iran' ? 'IR Iran' : datum.properties.NAME == 'Turkey' ? 'TÃ¼rkiye' : datum.properties.NAME == 'Czech Republic' ? 'Czechia' : datum.properties.NAME == 'Russia' ? 'Russian Federation' : datum.properties.NAME == 'Republic of Moldova' ? 'Republic of Moldova' : datum.properties.NAME == 'Republic of the Congo' ? 'Congo' : datum.properties.NAME == 'Democratic Republic of the Congo' ? 'DRC' : datum.properties.NAME == 'Myanmar' ? 'Myanmar' : datum.properties.NAME == 'Vietnam' ? 'Viet Nam' : datum.properties.NAME == 'Bosnia and Herzegovina' ? 'Bosnia and Herzegovina' : datum.properties.NAME == 'North Macedonia' ? 'North Macedonia' : datum.properties.NAME == 'Eswatini' ? 'Swaziland' : datum.properties.NAME",
          "as": "country_lookup"
        },
        {
          "lookup": "country_lookup",
          "from": {
            "data": {
              "url": "https://raw.githubusercontent.com/J3rey/FIT3179-Data-Visualisation-HW-W9/refs/heads/main/data/bronze_medals_by_country.csv"
            },
            "key": "country",
            "fields": ["bronze_count"]
          },
          "default": 0
        },
        {
          "calculate": "datum.bronze_count != null ? +datum.bronze_count : 0",
          "as": "bronze_medals"
        }
      ],
      "mark": { "type": "geoshape", "stroke": "white" },
      "encoding": {
        "color": {
          "field": "bronze_medals",
          "type": "quantitative",
          "scale": {
            "type": "threshold",
            "domain": [1, 10, 25, 50],
            "range": ["lightgray", "#FFD39B", "#CD7F32", "#8C6239", "#5C4033"],
            "zero": false
          },
          "legend": {
            "title": "Bronze Medals",
            "titleFontSize": 14,
            "titleFontWeight": "bold",
            "titleColor": "#2c3e50",
            "labelFontSize": 12,
            "labelColor": "#34495e",
            "orient": "right",
            "offset": 20,
            "cornerRadius": 5,
            "padding": 10,
            "strokeColor": "#bdc3c7",
            "fillColor": "rgba(255, 255, 255, 0.9)",
            "symbolSize": 200,
            "format": "d",
            "values": [0, 1, 10, 25, 50],
            "labelExpr": "datum.value == 0 ? '0' : datum.value == 1 ? '1-9' : datum.value == 10 ? '10-24' : datum.value == 25 ? '25-49' : '50+'"
          }
        },
        "tooltip": [
          { "field": "properties.NAME", "type": "nominal", "title": "Country" },
          {
            "field": "bronze_medals",
            "type": "quantitative",
            "title": "Bronze Medals"
          }
        ]
      }
    }
  ],
  "config": {
    "title": {
      "fontSize": 24,
      "fontWeight": "bold",
      "color": "#2c3e50",
      "offset": 10,
      "anchor": "middle"
    },
    "view": {
      "stroke": null
    },
    "legend": {
      "titleFontSize": 14,
      "titleFontWeight": "bold",
      "titleColor": "#2c3e50",
      "labelFontSize": 12,
      "labelColor": "#34495e",
      "cornerRadius": 5,
      "padding": 10
    }
  }
}
